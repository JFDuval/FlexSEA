//****************************************************************************
// MIT Media Lab - Biomechatronics
// Jean-Francois (Jeff) Duval
// jfduval@media.mit.edu
// 04/2016
//****************************************************************************
// ext_input: External Output Devices/Actuators
//****************************************************************************

//****************************************************************************
// Include(s)
//****************************************************************************

#include "main.h"
#include "ext_output.h"

//****************************************************************************
// Variable(s)
//****************************************************************************

uint8 clutch_pwm = 0;

//****************************************************************************
// Private Function Prototype(s):
//****************************************************************************	


//****************************************************************************
// Public Function(s)
//****************************************************************************

//Configuration for the clutch
void init_pwro(void)
{
	//PWM2: Clutch
	PWM_2_Start();
	PWM_2_WriteCompare(0);	//Start at 0%
}

//PWM, power output
void pwro_output(uint8 value)
{
	clutch_pwm = value;
	PWM_2_WriteCompare(clutch_pwm);
}

//Returns the PWM value of the power output
uint8 read_pwro(void)
{
	return clutch_pwm;
}

void test_pwro_output_blocking(void)
{
	uint8 pwm = 0;
	
	while(1)
	{
		pwm++;
		pwro_output(pwm);	
		CyDelay(1);
	}
}

//****************************************************************************
// Private Function(s)
//****************************************************************************


//****************************************************************************
// Test Function(s) - Use with care!
//****************************************************************************

